# Client

## Принципы написания TS кода

1. Все компоненты, которые отрисовываются роутером назвыаются PageComponent
2. Использовать только OnPush стратегию обнаружения изменений
3. Максимально использовать Standalone компоненты
4. В конструкторе всегда указывать readonly для полей класса и не добавлять слово сервис. Одна строка - один параметр.
5. Поля для использования внутри класса помечаем нижним подчёркиванием (например `private _fieldName = null`). Поля, которые помечены `public` для использования в шаблоне, но которые не являются частью публичного API компонента также сопровождаются нижним подчёркиванием. Обычно к ним относятся внедренные в компонент через конструктор сервисы.
6. Все `*ngFor` должны сопровождаться параметром `trackBy`. В большинстве случаев удобно использовать src/app/shared/utils/default-track-by.ts
7. Для всех полей на чтение указывать readonly, as const и т.д.
8. Любые низкоуровневые сервисы, которые нельзя изолированно протестировать из UI, должны быть покрыты unit-тестами. Для компонентов также желательно писать unit-тесты.
9. Для всех высокоуровневых компонентов должны быть описаны e2e-тесты. К их написанию можно активно привлекать UI.
10. В большинстве случаев, чтобы сделать из холодоного `Observable` горячий, используй `shareReplayOneRefCount` из src/app/shared/utils/share-replay-one-ref.ts.
11. Всецело избегать сохранения любых локальных стейтов. Стараться построить максимально реактивную архитектуру. Создавать неизменемые поля компонентов, хранящие потоки `Observable` вместо изменяемых полей, хранящих данные.
12. Всегда указывать максимально узкие типы, наскоьлко это позволяет TypeScript. Использовать Generics, string and number subtypes, mnemonic aliases.
13. По возможности минимизировать уровень вложенности кода. Разрешено использовать множественные return с этой целью. Хорошей практикой считается блок с проверкой корректности переданных аргументов и return/trow при недопустимых значениях в начале функции.
